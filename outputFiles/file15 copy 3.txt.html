<html><head><link rel='stylesheet' href='styles.css'></head><code><a style='color:violet;'>defmodule</a><a> </a><a style='color:gold;'>Broth</a><a style='color:red;'>.</a><a style='color:gold;'>Routes</a><a style='color:red;'>.</a><a style='color:gold;'>DevOnly</a><a> </a><a style='color:violet;'>do</a><div>
</div><a>  </a><a style='color:violet;'>import</a><a> </a><a style='color:gold;'>Plug</a><a style='color:red;'>.</a><a style='color:gold;'>Conn</a><div>
</div><div>
</div><a>  </a><a style='color:violet;'>alias</a><a> </a><a style='color:gold;'>Beef</a><a style='color:red;'>.</a><a style='color:gold;'>Schemas</a><a style='color:red;'>.</a><a style='color:gold;'>User</a><div>
</div><div>
</div><a>  </a><a style='color:sandybrown;'>use</a><a> </a><a style='color:gold;'>Plug</a><a style='color:red;'>.</a><a style='color:gold;'>Router</a><div>
</div><div>
</div><a>  </a><a style='color:sandybrown;'>plug</a><a style='color:red;'>(</a><a style='color:aquamarine;'>:match</a><a style='color:red;'>)</a><div>
</div><a>  </a><a style='color:sandybrown;'>plug</a><a style='color:red;'>(</a><a style='color:aquamarine;'>:dispatch</a><a style='color:red;'>)</a><div>
</div><div>
</div><a>  </a><a style='color:sandybrown;'>get</a><a> </a><a style='color:greenyellow;'>"/test-info"</a><a> </a><a style='color:violet;'>do</a><div>
</div><a>    </a><a style='color:sandybrown;'>env</a><a> </a><a style='color:red;'>=</a><a> </a><a style='color:gold;'>Application</a><a style='color:red;'>.</a><a style='color:sandybrown;'>fetch_env!</a><a style='color:red;'>(</a><a style='color:aquamarine;'>:kousa</a><a style='color:red;'>,</a><a> </a><a style='color:aquamarine;'>:env</a><a style='color:red;'>)</a><div>
</div><a>    </a><a style='color:sandybrown;'>staging?</a><a> </a><a style='color:red;'>=</a><a> </a><a style='color:gold;'>Application</a><a style='color:red;'>.</a><a style='color:sandybrown;'>get_env</a><a style='color:red;'>(</a><a style='color:aquamarine;'>:kousa</a><a style='color:red;'>,</a><a> </a><a style='color:aquamarine;'>:staging?</a><a style='color:red;'>)</a><div>
</div><div>
</div><a>    </a><a style='color:sandybrown;'>if</a><a> </a><a style='color:sandybrown;'>env</a><a> </a><a style='color:red;'>==</a><a> </a><a style='color:aquamarine;'>:dev</a><a> </a><a style='color:red;'>||</a><a> </a><a style='color:sandybrown;'>staging?</a><a> </a><a style='color:violet;'>do</a><div>
</div><a>      </a><a style='color:sandybrown;'>username</a><a> </a><a style='color:red;'>=</a><a> </a><a style='color:sandybrown;'>fetch_query_params</a><a style='color:red;'>(</a><a style='color:sandybrown;'>conn</a><a style='color:red;'>)</a><a style='color:red;'>.</a><a style='color:sandybrown;'>query_params</a><a style='color:red;'>[</a><a style='color:greenyellow;'>"username"</a><a style='color:red;'>]</a><div>
</div><a>      </a><a style='color:sandybrown;'>user</a><a> </a><a style='color:red;'>=</a><a> </a><a style='color:gold;'>Beef</a><a style='color:red;'>.</a><a style='color:gold;'>Users</a><a style='color:red;'>.</a><a style='color:sandybrown;'>get_by_username</a><a style='color:red;'>(</a><a style='color:sandybrown;'>username</a><a style='color:red;'>)</a><div>
</div><div>
</div><a>      </a><a style='color:sandybrown;'>conn</a><div>
</div><a>      </a><a style='color:red;'>|></a><a> </a><a style='color:sandybrown;'>put_resp_content_type</a><a style='color:red;'>(</a><a style='color:greenyellow;'>"application/json"</a><a style='color:red;'>)</a><div>
</div><a>      </a><a style='color:red;'>|></a><a> </a><a style='color:sandybrown;'>send_resp</a><a style='color:red;'>(</a><div>
</div><a>        </a><a style='color:#2a6edb;'>200</a><a style='color:red;'>,</a><div>
</div><a>        </a><a style='color:gold;'>Jason</a><a style='color:red;'>.</a><a style='color:sandybrown;'>encode!</a><a style='color:red;'>(</a><div>
</div><a>          </a><a style='color:gold;'>Kousa</a><a style='color:red;'>.</a><a style='color:gold;'>Utils</a><a style='color:red;'>.</a><a style='color:gold;'>TokenUtils</a><a style='color:red;'>.</a><a style='color:sandybrown;'>create_tokens</a><a style='color:red;'>(</a><div>
</div><a>            </a><a style='color:sandybrown;'>if</a><a style='color:red;'>(</a><a style='color:sandybrown;'>is_nil</a><a style='color:red;'>(</a><a style='color:sandybrown;'>user</a><a style='color:red;'>)</a><a style='color:red;'>,</a><div>
</div><a>              </a><a style='color:#2a6edb;'>do:</a><div>
</div><a>                </a><a style='color:gold;'>Beef</a><a style='color:red;'>.</a><a style='color:gold;'>Repo</a><a style='color:red;'>.</a><a style='color:sandybrown;'>insert!</a><a style='color:red;'>(</a><div>
</div><a>                  </a><a style='color:red;'>%</a><a style='color:gold;'>User</a><a style='color:red;'>{</a><div>
</div><a>                    </a><a style='color:#2a6edb;'>username:</a><a> </a><a style='color:sandybrown;'>username</a><a style='color:red;'>,</a><div>
</div><a>                    </a><a style='color:#2a6edb;'>email:</a><a> </a><a style='color:greenyellow;'>"test@"</a><a> </a><a style='color:red;'><></a><a> </a><a style='color:sandybrown;'>username</a><a> </a><a style='color:red;'><></a><a> </a><a style='color:greenyellow;'>"test.com"</a><a style='color:red;'>,</a><div>
</div><a>                    </a><a style='color:#2a6edb;'>githubAccessToken:</a><a> </a><a style='color:greenyellow;'>""</a><a style='color:red;'>,</a><div>
</div><a>                    </a><a style='color:#2a6edb;'>githubId:</a><a> </a><a style='color:greenyellow;'>"id:"</a><a> </a><a style='color:red;'><></a><a> </a><a style='color:sandybrown;'>username</a><a style='color:red;'>,</a><div>
</div><a>                    </a><a style='color:#2a6edb;'>avatarUrl:</a><a> </a><a style='color:greenyellow;'>"https://placekitten.com/200/200"</a><a style='color:red;'>,</a><div>
</div><a>                    </a><a style='color:#2a6edb;'>bannerUrl:</a><a> </a><a style='color:greenyellow;'>"https://placekitten.com/1000/300"</a><a style='color:red;'>,</a><div>
</div><a>                    </a><a style='color:#2a6edb;'>displayName:</a><a> </a><a style='color:gold;'>String</a><a style='color:red;'>.</a><a style='color:sandybrown;'>capitalize</a><a style='color:red;'>(</a><a style='color:sandybrown;'>username</a><a style='color:red;'>)</a><a style='color:red;'>,</a><div>
</div><a>                    </a><a style='color:#2a6edb;'>bio:</a><div>
</div><a>                      </a><a style='color:greenyellow;'>"This is some interesting info about the ex-founder of nothing, welcome to the bio of such a ocol pers on !"</a><div>
</div><a>                  </a><a style='color:red;'>}</a><a style='color:red;'>,</a><div>
</div><a>                  </a><a style='color:#2a6edb;'>returning:</a><a> </a><a style='color:#2a6edb;'>true</a><div>
</div><a>                </a><a style='color:red;'>)</a><a style='color:red;'>,</a><div>
</div><a>              </a><a style='color:#2a6edb;'>else:</a><a> </a><a style='color:sandybrown;'>user</a><div>
</div><a>            </a><a style='color:red;'>)</a><div>
</div><a>          </a><a style='color:red;'>)</a><div>
</div><a>        </a><a style='color:red;'>)</a><div>
</div><a>      </a><a style='color:red;'>)</a><div>
</div><a>    </a><a style='color:violet;'>else</a><div>
</div><a>      </a><a style='color:sandybrown;'>conn</a><div>
</div><a>      </a><a style='color:red;'>|></a><a> </a><a style='color:sandybrown;'>put_resp_content_type</a><a style='color:red;'>(</a><a style='color:greenyellow;'>"application/json"</a><a style='color:red;'>)</a><div>
</div><a>      </a><a style='color:red;'>|></a><a> </a><a style='color:sandybrown;'>send_resp</a><a style='color:red;'>(</a><a style='color:#2a6edb;'>400</a><a style='color:red;'>,</a><a> </a><a style='color:gold;'>Jason</a><a style='color:red;'>.</a><a style='color:sandybrown;'>encode!</a><a style='color:red;'>(</a><a style='color:red;'>%{</a><a style='color:greenyellow;'>"error"</a><a> </a><a style='color:red;'>=></a><a> </a><a style='color:greenyellow;'>"no"</a><a style='color:red;'>}</a><a style='color:red;'>)</a><a style='color:red;'>)</a><div>
</div><a>    </a><a style='color:violet;'>end</a><div>
</div><a>  </a><a style='color:violet;'>end</a><div>
</div><a style='color:violet;'>end</a></code></html>